InStyle ‚Äî –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ESP32 –∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª—å—Ç–∞ –æ–±—ä–µ–∫—Ç–∞
===================================================================

1. –ü—Ä–æ—à–∏–≤–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
-----------------------
- –û—Ç–∫—Ä–æ–π—Ç–µ `esp32_firmware.ino` –≤ Arduino IDE 1.8+ –∏–ª–∏ Arduino IDE 2.
- –í –º–µ–Ω—é **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí –ü–ª–∞—Ç–∞** –≤—ã–±–µ—Ä–∏—Ç–µ ¬´ESP32 Dev Module¬ª –∏–ª–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –º–æ–¥–µ–ª—å –≤–∞—à–µ–π –ø–ª–∞—Ç—ã.
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 115200 –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–ª–∞—Ç—É –ø–æ USB.
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–µ—Ç—á –Ω–∞ ESP32. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –ø—Ä–æ—à–∏–≤–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ø–∞–º—è—Ç–∏.

2. –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä–∞
-------------------------------
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–∏–Ω, –∑–∞–¥–∞–Ω–Ω—ã–π –≤ –ø—Ä–æ—à–∏–≤–∫–µ (`RELAY_PIN`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é GPIO23) –∏ –æ–±—â–∏–π GND ESP32.
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–æ–¥—É–ª—å —Ä–µ–ª–µ/–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä–∞ (5‚ÄØ–í –∏–ª–∏ 12‚ÄØ–í) —Å–æ–≥–ª–∞—Å–Ω–æ –µ–≥–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
  * **IN** (—É–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤—Ö–æ–¥) ‚Üí GPIO23 ESP32 —á–µ—Ä–µ–∑ —É—Ä–æ–≤–µ–Ω—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
  * **GND** ‚Üí GND ESP32.
  * **VCC** ‚Üí 5‚ÄØ–í –æ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ë–ü).
- –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–∏–ª–æ–≤–æ–π —á–∞—Å—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä–∞:
  * –§–∞–∑–∞ —Å–µ—Ç–∏ ‚Üí –æ–±—â–∏–π –∫–æ–Ω—Ç–∞–∫—Ç **COM** —Ä–µ–ª–µ.
  * –ù–∞–≥—Ä—É–∑–∫–∞ (–æ—Å–≤–µ—â–µ–Ω–∏–µ) ‚Üí –Ω–æ—Ä–º–∞–ª—å–Ω–æ-—Ä–∞–∑–æ–º–∫–Ω—É—Ç—ã–π –∫–æ–Ω—Ç–∞–∫—Ç **NO**.
  * –ù–µ–π—Ç—Ä–∞–ª—å –≤–µ–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫—É.
- –ï—Å–ª–∏ —Ä–µ–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω–≤–µ—Ä—Å–Ω–æ–π –ª–æ–≥–∏–∫–µ, –ø–æ–º–µ–Ω—è–π—Ç–µ `RELAY_ACTIVE_HIGH` –Ω–∞ `false` –∏ –ø–µ—Ä–µ–∑–∞–ª–µ–π—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É.

3. –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ESP32
---------------------------
- –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–¥–Ω–∏–º–µ—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ `BSG-OBJECT` (–ø–∞—Ä–æ–ª—å `1234`).
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —ç—Ç–æ–π —Å–µ—Ç–∏ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://192.168.4.1`.
- –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤—ã–±–µ—Ä–∏—Ç–µ Wi‚ÄëFi —Å–µ—Ç—å –æ–±—ä–µ–∫—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç –¥–ª—è API.
- –ù–∞–∂–º–∏—Ç–µ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª. –ü–ª–∞—Ç–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `http://object.local` (mDNS).

4. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ Telegram-–±–æ—Ç—É
---------------------------
- –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ESP32 –∑–∞–π–¥–∏—Ç–µ –≤ `data/object_control/device.json` –∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```json
  { "endpoint": "http://192.168.1.45/api/state", "secret": "MySecret", "timeout": 7 }
  ```
- –ï—Å–ª–∏ –≤ –ø—Ä–æ—à–∏–≤–∫–µ –∑–∞–¥–∞–Ω —Å–µ–∫—Ä–µ—Ç, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ —Ç–æ—Ç –∂–µ `secret` –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏ ¬´–ü—É–ª—å—Ç –æ–±—ä–µ–∫—Ç–∞¬ª –≤ –±–æ—Ç–µ Python –æ—Ç–ø—Ä–∞–≤–∏—Ç POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/state` ESP32 –∏ –æ–±–Ω–æ–≤–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
--------------------------
- –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞ ‚Äî –≤ –±–ª–æ–∫–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ ¬´üí° –°–≤–µ—Ç: ‚Ä¶¬ª.
- –ù–∞–∂–º–∏—Ç–µ ¬´–ü—É–ª—å—Ç –æ–±—ä–µ–∫—Ç–∞¬ª ‚Üí ¬´–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å¬ª. –°–≤–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ, –∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–¥—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `data/object_control/state.json`. –§–∞–π–ª –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞.
- –ï—Å–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –±–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
------------------------------
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è ESP32 –∏ —Ä–µ–ª–µ.
- –î–ª—è —Å–∏–ª–æ–≤–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –Ω–∞ —Ç–æ–∫ –Ω–∞–≥—Ä—É–∑–∫–∏, —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º RC-—Å–Ω—É–±–±–µ—Ä–æ–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π VLAN –¥–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É –∏ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ñ–∞–π–ª–æ–≤ `device.json` –∏ `state.json`.
